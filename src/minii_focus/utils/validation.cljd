(ns minii-focus.utils.validation
  "Input validation utilities")

(defn validate-task-content
  "Validate task content.
  Returns nil if valid, or error message string if invalid."
  [content]
  (cond
    (empty? content) "Please enter content"
    (> (count content) 1000) "Content is too long (max 1000 characters)"
    :else nil))

(defn validate-date-range
  "Validate that defer date is before or equal to due date.
  Returns nil if valid, or error message string if invalid."
  [defer-date due-date]
  (when (and defer-date due-date (.isAfter defer-date due-date))
    "Start date must be before or equal to due date"))

(defn validate-task-input
  "Validate task input fields.
  Returns nil if valid, or error message string if invalid.
  
  Parameters:
  - content: Task content string
  - defer-date: Optional DateTime for start date
  - due-date: Optional DateTime for due date"
  [content & {:keys [defer-date due-date]}]
  (or (validate-task-content content)
      (validate-date-range defer-date due-date)))

